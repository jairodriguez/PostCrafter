"use strict";(()=>{var e={};e.id=668,e.ids=[668],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},796:(e,r,s)=>{s.r(r),s.d(r,{config:()=>u,default:()=>i,routeModule:()=>l});var t={};s.r(t),s.d(t,{default:()=>handler});var o=s(802),n=s(153),a=s(249);async function handler(e,r){if(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),r.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),"OPTIONS"===e.method){r.status(200).end();return}if("POST"!==e.method)return r.status(405).json({success:!1,error:"Method Not Allowed"});try{let{title:s,content:t,excerpt:o,status:n="publish"}=e.body;if(!s||!t)return r.status(400).json({success:!1,error:"Title and content are required"});let a=process.env.WORDPRESS_URL,i=process.env.WORDPRESS_USERNAME,u=process.env.WORDPRESS_APP_PASSWORD;if(!a||!i||!u)return r.status(500).json({success:!1,error:"WordPress credentials not configured"});let l={title:s,content:t,status:n,...o&&{excerpt:o}},d=await fetch(`${a}/wp-json/wp/v2/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${Buffer.from(`${i}:${u}`).toString("base64")}`},body:JSON.stringify(l)});if(!d.ok){let e=await d.text();return r.status(d.status).json({success:!1,error:`WordPress API error: ${d.status} - ${e}`})}let c=await d.json();return r.status(200).json({success:!0,post_id:c.id,post_url:c.link})}catch(e){return console.error("Publish error:",e),r.status(500).json({success:!1,error:"Internal server error"})}}let i=(0,a.l)(t,"default"),u=(0,a.l)(t,"config"),l=new o.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/publish",pathname:"/api/publish",bundlePath:"",filename:""},userland:t})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[222],()=>__webpack_exec__(796));module.exports=s})();